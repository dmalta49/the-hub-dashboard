<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hub Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard, a structure chosen for its superiority in managing dynamic data over a static table. It features four key areas: 1) Summary Cards for a quick, high-level overview of task progress. 2) A Donut Chart for a clear visual breakdown of tasks by status. 3) An Interactive Task List with filtering controls, allowing users to drill down into the data. 4) An "Add Task" form to make the planner a living document. This task-oriented design supports a user flow of 'Assess -> Analyze -> Act', which is highly effective for project management and significantly improves usability compared to the original static report. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Overall task counts by status -> Goal: Inform -> Viz/Presentation: Summary Cards (HTML/CSS) -> Interaction: Dynamically updated via JS when tasks change -> Justification: Provides immediate, scannable key metrics.
        - Report Info: Proportional breakdown of task statuses -> Goal: Compare/Inform -> Viz/Presentation: Donut Chart -> Interaction: Hover tooltips for details; updates on data change -> Justification: Offers an intuitive visual comparison of workload distribution. -> Library/Method: Chart.js (Canvas).
        - Report Info: Full list of assignments -> Goal: Organize/Explore -> Viz/Presentation: Filterable HTML Table -> Interaction: Users can filter by person or status to narrow down the dataset -> Justification: Allows users to focus on relevant information, making the data manageable. -> Library/Method: Vanilla JS DOM manipulation.
        - Report Info: Ability to add tasks (implicit need) -> Goal: Interact/Update -> Viz/Presentation: HTML Form -> Interaction: User submission adds a new task to the list and updates all visualizations -> Justification: Transforms the static report into a functional, dynamic tool. -> Library/Method: Vanilla JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 100%;
            }
        }
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
        }
        .status-not-started { background-color: #E2E8F0; color: #4A5568; }
        .status-in-progress { background-color: #C3DAFE; color: #2A69AC; }
        .status-done { background-color: #BEE3F8; color: #2C5282; }
        .status-blocked { background-color: #FED7D7; color: #9B2C2C; }
        .delete-btn {
            color: #EF4444;
            cursor: pointer;
            font-size: 1.25rem;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">The Hub Dashboard</h1>
            <p class="mt-2 text-gray-600">show planner</p>
        </header>

        <section id="summary" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h3 class="text-sm font-medium text-gray-500">All Stories</h3>
                <p id="total-tasks" class="text-3xl font-bold text-gray-800 mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h3 class="text-sm font-medium text-gray-500">In Progress</h3>
                <p id="in-progress-tasks" class="text-3xl font-bold text-blue-600 mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h3 class="text-sm font-medium text-gray-500">Completed Stories</h3>
                <p id="done-tasks" class="text-3xl font-bold text-teal-600 mt-2">0</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h3 class="text-sm font-medium text-gray-500">Planned Stories</h3>
                <p id="planned-stories-tasks" class="text-3xl font-bold text-red-600 mt-2">0</p>
            </div>
        </section>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-lg font-semibold text-gray-800 mb-4 text-center">Task Status Breakdown</h2>
                <p class="text-sm text-gray-600 text-center mb-4">This chart provides a visual summary of all tasks based on their current status. Hover over any segment to see the exact number of tasks.</p>
                <div class="chart-container">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <div class="flex justify-center mb-4 space-x-4">
                    <button id="weekly-view" class="py-2 px-4 rounded-lg font-semibold transition-colors">Weekly View</button>
                    <button id="monthly-view" class="py-2 px-4 rounded-lg font-semibold transition-colors">Monthly View</button>
                </div>

                <div id="weekly-view-section">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">Weekly Task List</h2>
                    <p class="text-sm text-gray-600 mb-4">Here you can see all the assignments for the current week. Use the filters to narrow your search by person or status to easily track progress and responsibilities.</p>
                </div>

                <div id="monthly-view-section" class="hidden">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4 flex justify-between items-center">
                        <button id="prev-month" class="px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors">
                            &lt;
                        </button>
                        <span id="month-display"></span>
                        <button id="next-month" class="px-2 py-1 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors">
                            &gt;
                        </button>
                    </h2>
                     <p class="text-sm text-gray-600 mb-4">View all planned assignments and due dates for the selected month.</p>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 mb-4">
                    <select id="person-filter" class="w-full sm:w-1/2 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="all">Filter by Person (All)</option>
                    </select>
                    <select id="status-filter" class="w-full sm:w-1/2 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="all">Filter by Status (All)</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Done">Done</option>
                        <option value="Planned Stories">Planned Stories</option>
                    </select>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-600">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Person</th>
                                <th scope="col" class="px-6 py-3">Assignment</th>
                                <th scope="col" class="px-6 py-3">Status</th>
                                <th scope="col" class="px-6 py-3">Event Date</th>
                                <th scope="col" class="px-6 py-3">Notes</th>
                                <th scope="col" class="px-6 py-3">Action</th>
                            </tr>
                        </thead>
                        <tbody id="task-table-body">
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
        
        <section id="add-task-section" class="mt-10 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Add a New Task</h2>
            <p class="text-sm text-gray-600 mb-4">Use this form to add new assignments to the planner. The dashboard will update automatically once a new task is submitted.</p>
            <form id="add-task-form" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-end">
                <div class="lg:col-span-1">
                    <label for="person" class="block text-sm font-medium text-gray-700">Person</label>
                    <select id="person" name="person" required class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select a person</option>
                    </select>
                </div>
                <div class="lg:col-span-2">
                    <label for="task" class="block text-sm font-medium text-gray-700">Assignment/Task</label>
                    <input type="text" id="task" name="task" required class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                 <div class="lg:col-span-1">
                    <label for="event-date" class="block text-sm font-medium text-gray-700">Event Date</label>
                    <input type="date" id="event-date" name="event-date" required class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div class="lg:col-span-1">
                    <label for="status-add" class="block text-sm font-medium text-gray-700">Status</label>
                    <select id="status-add" name="status-add" class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option>In Progress</option>
                        <option>Done</option>
                        <option>Planned Stories</option>
                    </select>
                </div>
                <div class="md:col-span-2 lg:col-span-4">
                     <label for="notes" class="block text-sm font-medium text-gray-700">Notes</label>
                    <textarea id="notes" name="notes" rows="4" class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                </div>
                <button type="submit" class="w-full lg:col-span-1 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150">Add Task</button>
            </form>
        </section>

        <section id="chat-link" class="mt-10 bg-white p-6 rounded-xl shadow-sm border border-gray-200 text-center">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Team Chat</h2>
            <p class="text-sm text-gray-600 mb-4">Click below to open the team's Google Chat room for real-time collaboration.</p>
            <a href="https://chat.google.com/room/AAQAhis8bi8?cls=7" target="_blank" rel="noopener noreferrer" class="inline-block bg-teal-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition duration-150">
                Go to Google Chat
            </a>
        </section>
    </div>

    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <h3 class="text-lg font-semibold mb-4">Confirm Deletion</h3>
            <p class="mb-6">Are you sure you want to delete this task? This action cannot be undone.</p>
            <div class="flex justify-center space-x-4">
                <button id="cancel-delete" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors">Cancel</button>
                <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">Delete</button>
            </div>
        </div>
    </div>

    <script>
        try {
            document.addEventListener('DOMContentLoaded', () => {
                const initialTasks = [
                    { id: 1, person: 'Dan', task: 'Draft the introduction for the report', status: 'Planned Stories', dueDate: '2025-09-08', notes: 'Find relevant sources in the shared folder.' },
                    { id: 2, person: 'Johanna', task: 'Create the data visualization charts', status: 'In Progress', dueDate: '2025-09-09', notes: 'Need to finalize the color palette.' },
                    { id: 3, person: 'John', task: 'Proofread the conclusion section', status: 'Planned Stories', dueDate: '2025-09-10', notes: 'Conclusion draft will be ready on Tuesday.' },
                    { id: 4, person: 'Marcus', task: 'Finalize the presentation deck', status: 'Done', dueDate: '2025-09-11', notes: 'Everything has been approved.' },
                    { id: 5, person: 'David', task: 'Schedule a team meeting for next week', status: 'In Progress', dueDate: '2025-09-07', notes: 'Sent a poll to find a good time.' },
                    { id: 6, person: 'Dan', task: 'Outline Q3 marketing plan', status: 'Planned Stories', dueDate: '2025-09-20', notes: 'Initial brainstorm with the team.' },
                    { id: 7, person: 'Johanna', task: 'Research new software tools', status: 'Planned Stories', dueDate: '2025-09-22', notes: 'Looking for tools to improve collaboration.' },
                    { id: 8, person: 'David', task: 'Plan team off-site', status: 'Planned Stories', dueDate: '2025-10-15', notes: 'Need to book a venue and activities for the Q4 off-site.' },
                    { id: 9, person: 'Marcus', task: 'Develop product roadmap', status: 'Planned Stories', dueDate: '2025-10-31', notes: 'Focus on key features for next quarter.' },
                    { id: 10, person: 'Dan', task: 'Review new design mockups', status: 'In Progress', dueDate: '2025-10-10', notes: 'Provide feedback to the design team.' },
                ];

                let tasks = [...initialTasks];
                let statusChart;
                const statuses = ['In Progress', 'Done', 'Planned Stories'];

                const tableBody = document.getElementById('task-table-body');
                const personFilter = document.getElementById('person-filter');
                const statusFilter = document.getElementById('status-filter');
                const addTaskForm = document.getElementById('add-task-form');
                const addPersonSelect = document.getElementById('person');
                const weeklyViewButton = document.getElementById('weekly-view');
                const monthlyViewButton = document.getElementById('monthly-view');
                const weeklyViewSection = document.getElementById('weekly-view-section');
                const monthlyViewSection = document.getElementById('monthly-view-section');
                const monthDisplay = document.getElementById('month-display');
                const prevMonthButton = document.getElementById('prev-month');
                const nextMonthButton = document.getElementById('next-month');
                const deleteModal = document.getElementById('delete-modal');
                const confirmDeleteButton = document.getElementById('confirm-delete');
                const cancelDeleteButton = document.getElementById('cancel-delete');
                
                let currentView = 'weekly';
                let currentMonth = new Date().getMonth();
                let currentYear = new Date().getFullYear();
                let taskIdToDelete = null;

                const statusColors = {
                    'In Progress': '#C3DAFE',
                    'Done': '#BEE3F8',
                    'Planned Stories': '#FED7D7',
                };
                
                const statusTextColors = {
                    'In Progress': '#2A69AC',
                    'Done': '#2C5282',
                    'Planned Stories': '#9B2C2C',
                };

                function getStatusBadge(status) {
                    const statusClassMap = {
                        'Not Started': 'status-not-started', // Keeping this for backward compatibility in case old tasks remain.
                        'In Progress': 'status-in-progress',
                        'Done': 'status-done',
                        'Planned Stories': 'status-blocked',
                    };
                    return `<span class="status-badge ${statusClassMap[status] || ''}">${status}</span>`;
                }

                function getStartOfWeek(date) {
                    const d = new Date(date);
                    const day = d.getDay();
                    const diff = d.getDate() - day + (day === 0 ? -6 : 1);
                    return new Date(d.setDate(diff));
                }

                function getEndOfWeek(date) {
                    const startOfWeek = getStartOfWeek(date);
                    const endOfWeek = new Date(startOfWeek);
                    endOfWeek.setDate(startOfWeek.getDate() + 6);
                    return endOfWeek;
                }

                function filterTasks() {
                    if (currentView === 'weekly') {
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);
                        const startOfWeek = getStartOfWeek(today);
                        const endOfWeek = getEndOfWeek(today);
                        return tasks.filter(task => {
                            const taskEventDate = new Date(task.dueDate + 'T00:00:00');
                            return taskEventDate >= startOfWeek && taskEventDate <= endOfWeek;
                        });
                    } else if (currentView === 'monthly') {
                        const monthStart = new Date(currentYear, currentMonth, 1);
                        const monthEnd = new Date(currentYear, currentMonth + 1, 0);
                        return tasks.filter(task => {
                            const taskEventDate = new Date(task.dueDate + 'T00:00:00');
                            return taskEventDate >= monthStart && taskEventDate <= monthEnd;
                        });
                    }
                    return tasks;
                }

                function updateSummary() {
                    const filteredTasks = filterTasks();
                    document.getElementById('total-tasks').textContent = tasks.length;
                    document.getElementById('in-progress-tasks').textContent = filteredTasks.filter(t => t.status === 'In Progress').length;
                    document.getElementById('done-tasks').textContent = filteredTasks.filter(t => t.status === 'Done').length;
                    document.getElementById('planned-stories-tasks').textContent = filteredTasks.filter(t => t.status === 'Planned Stories').length;
                }

                function updateChart() {
                    const filteredTasks = filterTasks();
                    const statusCounts = filteredTasks.reduce((acc, task) => {
                        acc[task.status] = (acc[task.status] || 0) + 1;
                        return acc;
                    }, {});

                    const chartLabels = Object.keys(statusCounts);
                    const chartData = Object.values(statusCounts);
                    const backgroundColors = chartLabels.map(label => statusColors[label] || '#CCCCCC');

                    if (statusChart) {
                        statusChart.data.labels = chartLabels;
                        statusChart.data.datasets[0].data = chartData;
                        statusChart.data.datasets[0].backgroundColor = backgroundColors;
                        statusChart.update();
                    } else {
                        const ctx = document.getElementById('statusChart').getContext('2d');
                        statusChart = new Chart(ctx, {
                            type: 'doughnut',
                            data: {
                                labels: chartLabels,
                                datasets: [{
                                    data: chartData,
                                    backgroundColor: backgroundColors,
                                    borderColor: '#FDFBF8',
                                    borderWidth: 4,
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'bottom',
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                let label = context.label || '';
                                                if (label) {
                                                    label += ': ';
                                                }
                                                if (context.parsed !== null) {
                                                    label += context.parsed;
                                                }
                                                return label;
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    }
                }

                function renderTable() {
                    const filteredTasks = filterTasks();
                    const person = personFilter.value;
                    const status = statusFilter.value;

                    const finalFilteredTasks = filteredTasks.filter(task => 
                        (person === 'all' || task.person === person) &&
                        (status === 'all' || task.status === status)
                    );

                    tableBody.innerHTML = '';
                    if (finalFilteredTasks.length === 0) {
                         tableBody.innerHTML = `<tr><td colspan="6" class="text-center py-4">No tasks match the current filters.</td></tr>`;
                         return;
                    }
                    
                    finalFilteredTasks.forEach(task => {
                        const row = document.createElement('tr');
                        row.className = 'bg-white border-b';
                        row.dataset.taskId = task.id;
                        row.innerHTML = `
                            <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">${task.person}</td>
                            <td class="px-6 py-4">${task.task}</td>
                            <td class="px-6 py-4"><span class="cursor-pointer" data-task-id="${task.id}">${getStatusBadge(task.status)}</span></td>
                            <td class="px-6 py-4">${new Date(task.dueDate + 'T00:00:00').toLocaleDateString()}</td>
                            <td class="px-6 py-4">${task.notes}</td>
                            <td class="px-6 py-4">
                                <span class="delete-btn" data-task-id="${task.id}">&#x2715;</span>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                }

                function populateFilters() {
                    const people = [...new Set(tasks.map(task => task.person))].sort();
                    personFilter.innerHTML = '<option value="all">Filter by Person (All)</option>';
                    addPersonSelect.innerHTML = '<option value="">Select a person</option>';
                    people.forEach(person => {
                        const option1 = document.createElement('option');
                        option1.value = person;
                        option1.textContent = person;
                        personFilter.appendChild(option1);
                        
                        const option2 = document.createElement('option');
                        option2.value = person;
                        option2.textContent = person;
                        addPersonSelect.appendChild(option2);
                    });
                }

                function handleAddTask(e) {
                    e.preventDefault();
                    const form = e.target;
                    const newTask = {
                        id: tasks.length > 0 ? Math.max(...tasks.map(t => t.id)) + 1 : 1,
                        person: form.person.value.trim(),
                        task: form.task.value.trim(),
                        status: form['status-add'].value,
                        dueDate: form['event-date'].value,
                        notes: form.notes.value.trim()
                    };

                    tasks.push(newTask);
                    form.reset();
                    document.getElementById('person').focus();

                    fullUpdate();
                    populateFilters(); 
                }
                
                function handleStatusToggle(e) {
                    const target = e.target.closest('.status-badge');
                    if (!target) return;
                    
                    const taskId = target.closest('[data-task-id]').dataset.taskId;
                    const taskIndex = tasks.findIndex(t => t.id == taskId);
                    
                    if (taskIndex > -1) {
                        const currentStatus = tasks[taskIndex].status;
                        const statusIndex = statuses.indexOf(currentStatus);
                        const nextStatusIndex = (statusIndex + 1) % statuses.length;
                        tasks[taskIndex].status = statuses[nextStatusIndex];
                        fullUpdate();
                    }
                }

                function handleDelete(e) {
                    const target = e.target.closest('.delete-btn');
                    if (!target) return;

                    taskIdToDelete = target.dataset.taskId;
                    deleteModal.style.display = 'flex';
                }

                function confirmDelete() {
                    if (taskIdToDelete !== null) {
                        tasks = tasks.filter(t => t.id != taskIdToDelete);
                        taskIdToDelete = null;
                        hideModal();
                        fullUpdate();
                        populateFilters();
                    }
                }

                function hideModal() {
                    deleteModal.style.display = 'none';
                }


                function fullUpdate() {
                    updateSummary();
                    updateChart();
                    renderTable();
                }

                function updateMonthDisplay() {
                    const date = new Date(currentYear, currentMonth);
                    monthDisplay.textContent = date.toLocaleString('en-US', { month: 'long', year: 'numeric' });
                }

                function showView(view) {
                    weeklyViewSection.classList.add('hidden');
                    monthlyViewSection.classList.add('hidden');
                    if (view === 'weekly') {
                        weeklyViewSection.classList.remove('hidden');
                        weeklyViewButton.classList.add('bg-gray-200');
                        monthlyViewButton.classList.remove('bg-gray-200');
                        currentView = 'weekly';
                    } else if (view === 'monthly') {
                        monthlyViewSection.classList.remove('hidden');
                        monthlyViewButton.classList.add('bg-gray-200');
                        weeklyViewButton.classList.remove('bg-gray-200');
                        currentView = 'monthly';
                    }
                    fullUpdate();
                }
                
                weeklyViewButton.addEventListener('click', () => showView('weekly'));
                monthlyViewButton.addEventListener('click', () => showView('monthly'));
                prevMonthButton.addEventListener('click', () => {
                    currentMonth--;
                    if (currentMonth < 0) {
                        currentMonth = 11;
                        currentYear--;
                    }
                    updateMonthDisplay();
                    fullUpdate();
                });
                nextMonthButton.addEventListener('click', () => {
                    currentMonth++;
                    if (currentMonth > 11) {
                        currentMonth = 0;
                        currentYear++;
                    }
                    updateMonthDisplay();
                    fullUpdate();
                });

                personFilter.addEventListener('change', renderTable);
                statusFilter.addEventListener('change', renderTable);
                addTaskForm.addEventListener('submit', handleAddTask);
                tableBody.addEventListener('click', handleStatusToggle);
                tableBody.addEventListener('click', handleDelete);
                confirmDeleteButton.addEventListener('click', confirmDelete);
                cancelDeleteButton.addEventListener('click', hideModal);
                
                updateMonthDisplay();
                showView('weekly');
                populateFilters();
            });
        } catch (error) {
            console.error("An error occurred in the script:", error);
            document.body.innerHTML = `<div class="p-8 text-center text-red-600">
                <h1 class="text-2xl font-bold">Error Loading Application</h1>
                <p class="mt-4">It looks like something went wrong. Please check your browser's developer console for more details.</p>
            </div>`;
        }
    </script>
</body>
</html>
